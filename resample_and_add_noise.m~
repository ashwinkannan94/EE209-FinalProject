% Resamples data to add uncertainty in rotation speed and
% add noise to the sensor measurement

function resample_and_add_noise(sensor_data1, sensor_data2, rotation_uncertainty, sensor_noise)
    if nargin == 2
        rotation_uncertainty = 3; % maximum increase in rotation speed
        sensor_noise = 0.03; % +- 3% noise
    end
    
    data_size = length(sensor_data1);
    
    new_sensor_data1 = [];
    new_sensor_data2 = [];
    
    iter = 1;
    while iter <= data_size
        % standard deviation of Gaussian noise
        sd_noise1 = sensor_data1(iter)*sensor_noise;
        sd_noise2 = sensor_data2(iter)*sensor_noise;
        
        % add Gaussian noise
        new_sensor_data1 = [new_sensor_data1, normrnd(sensor_data1(iter), sd_noise1)];
        new_sensor_data2 = [new_sensor_data2, normrnd(sensor_data2(iter), sd_noise2)];
        iter = iter + randi(rotation_uncertainty);
    end
    
    plot(ne
end